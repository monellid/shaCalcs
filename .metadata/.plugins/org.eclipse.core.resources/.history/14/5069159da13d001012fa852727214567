package org.gem.correlationmodels;

import java.util.Comparator;
import java.util.List;
import java.util.Random;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.gem.calc.HazardCalculator;
import org.opensha.commons.data.Site;
import org.opensha.commons.geo.LocationUtils;
import org.opensha.sha.earthquake.EqkRupture;
import org.opensha.sha.imr.ScalarIntensityMeasureRelationshipAPI;

/**
 * Defines correlation model from Jayamram & Baker (2009):
 * "Correlation model for spatially distributed ground-motion intensities"
 * Nirmal Jayaram and Jack W. Baker, Earthquake Engng. Struct. Dyn (2009)
 */
public class JB2009 {
	
	private static ScalarIntensityMeasureRelationshipAPI attenRel;
	private static EqkRupture rup;
    private static List<Site> sites;
    private static Boolean Vs30Cluster;
    
    private static Log logger = LogFactory.getLog(HazardCalculator.class);

    /**
     * Compare two sites in terms of their distance with respect to a reference
     * site.
     */
    private final class SiteComparator implements Comparator {

        private final Site baseSite;

        public SiteComparator(Site baseSite) {
            this.baseSite = baseSite;
        }

        @Override
        public int compare(Object site1, Object site2) {
            Site s1 = (Site) site1;
            Site s2 = (Site) site2;
            double dist_s1 =
                    LocationUtils.horzDistance(baseSite.getLocation(),
                            s1.getLocation());
            double dist_s2 =
                    LocationUtils.horzDistance(baseSite.getLocation(),
                            s2.getLocation());
            if (dist_s1 < dist_s2) {
                return -1;
            } else if (dist_s1 == dist_s2) {
                return 0;
            } else if (dist_s1 > dist_s2) {
                return +1;
            }
            return 0;
        }
    };
    
	public JB2009(ScalarIntensityMeasureRelationshipAPI attenRel, EqkRupture rup,
            List<Site> sites, Boolean Vs30Cluster){
		this.attenRel = attenRel;
		this.rup = rup;
		this.sites = sites;
		this.Vs30Cluster = Vs30Cluster;
	}
}
